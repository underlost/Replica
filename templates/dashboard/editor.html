{% extends 'replica/dashboard/base.html' %}
{% load core_tags %}{% load humanize %}{% load dash %}

{% block page %}nano{% endblock %}

{% block content %}
<form method="POST" enctype="multipart/form-data" action="" id="EntryForm" class="DefaultForm">{% csrf_token %}
<section id="create" class="panel panel-default">

	<fieldset class="NanoEntry">
		{{form.title}}
		{{form.deck}}

		{% if form.body.errors %}
		    <div class="alert alert-danger">
		    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
		    <ul class="list-unstyled">
		    {% for error in form.body.errors %}
		        <li><strong>{{ error|escape }}</strong></li>
		    {% endfor %}
		    </ul></div>
		{% endif %}
		{{form.body}}
	</fieldset>

    <div class="modal fade" id="NanoSettings">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">Settings</h4>
                </div>

                <div class="modal-body">
                    <div class="form-group datepicker-wrapper">
                        <label for="datetimepicker" class="sr-only">Date</label>
                        <div class="input-group">
                            <span class="input-group-addon">Publish on</span>
                            {{form.pub_date}}
                        </div>
                    </div>
		            <div class="form-group">
                        <label for="id_image">Featured Image (optional)</label>
                        {{form.image}}
                    </div>
                    <div class="form-group">
                        <label for="id_post_type">Type of Post</label>
                        {{form.post_type}}
                    </div>
                    <div class="form-group">
                        <div class="input-group inputURL">
                            <span class="input-group-addon">url</span>
                            {{form.url}}
                        </div>
                    </div>
                    <div class="form-group topic-checkbox">
                        <label for="">Topics</label><br />
                        {% for checkbox in form.topic %}
                        <label class="checkbox-inline" for="{{ checkbox.id_for_label }}">{{ checkbox }}</label>
                        {% if forloop.counter|divisibleby:3 %}<br />{% endif %}
                        {% endfor %}
                    </div>
                    <div class="form-group">
                        <h4>Post Status</h4>
                        {% for radio in form.is_active %}
                        <label class="radio-inline" for="{{ radio.id_for_label }}">{{ radio }}</label>
                        {% endfor %}
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</section><!-- /panel -->

<footer class="navbar navbar-inverse navbar-fixed-bottom" role="navigation">
    <div class="wrapper">
        <div class="navbar-header">
			<button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".footer-collapse">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>

			<p class="navbar-text" id="NanoSettingsLink">
				<a data-toggle="modal" href="#NanoSettings" class="navbar-link"><span class="glyphicon glyphicon-cog"></span> Settings</a>
			</p>
		</div>

		<nav class="collapse navbar-collapse footer-collapse" role="navigation">
			<ul class="nav navbar-nav navbar-right">
				{% if adding %}
				<li><input type="submit" class="btn btn-link" value="Save"></li>
				{% else %}
				<li><input type="submit" class="btn btn-link" value="Edit"></li>
				<li><a href="{{ entry.get_absolute_url }}" class="">Preview</a></li>
				<li><a href="{% url 'Replica:DraftsForEntry' entry.guid %}" class="">Drafts</a></li>
				{% endif %}
			</ul>
		</nav>

    </div>
</footer>
</form>
{% endblock %}

{% block javascript %}
<!-- Javascript -->
<script src="{{STATIC_URL}}replica/js/lib/jquery.autosize.min.js" type="text/javascript"></script>
<script src="{{STATIC_URL}}replica/js/lib/markdown.js"></script>
<script>$(document).ready(function(){$('textarea').autosize();});

$('#datetimepicker').datepicker({
    format: "mm/dd/yyyy",
    todayBtn: true
});

</script>
{% endblock %}
