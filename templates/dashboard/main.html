{% extends 'replica/dashboard/base.html' %}
{% load core_tags %}{% load humanize %}{% load dash %}

{% block page %}main dashboard{% endblock %}

{% block content %}

<div class="row">

	<div class="col-md-7">
		<section id="new-idea" class="panel panel-default">
		<div class="panel-body">
		<form action="" id="create-idea" method="post">{% csrf_token %}
			<div class="row">
				<div class="col-xs-11 col-lg-11">
					{{form.title}}
				</div>
				<div class="col-xs-1 col-lg-1">
				<input type="submit" class="btn btn-default pull-right" value="Save">
				</div>
			</div>
			{{form.body.errors}}
			{{form.body}}

			<div class="hidden">
				{{form.pub_date}}
				{{form.deck}}
				{{form.url}}
				{{form.post_type}}
				{{form.content_format}}
				{% for radio in form.is_active %}
				<label class="radio inline">{{ radio }}</label>
				{% endfor %}
			</div>
		</form>
		</div>
		</section>

		<div class="row">
			<div class="col-md-6">

			<section class="panel panel-default replica-time">
				<div class="panel-heading">
    				<h4 class="panel-title"><span class="glyphicon glyphicon-time"></span> Local Time</h4>
				</div>

				<div class="panel-body">
					<span class="datetime-time">{% now "g:i" %} <span class="datetime-ampm">{% now "a" %}</span></span>
					<span class="datetime-date">{% now "l, N j Y" %}</span>
				</div>
			</section>

			<section class="panel panel-default entry-donut-stats">
					<div class="panel-heading">
						<h4 class="panel-title"><span class="glyphicon glyphicon-stats"></span> Entries</h4>
					</div>

					<div class="panel-body">
						<canvas id="EntryDoughnut" class="donut-stats-center" height="200" width="200"></canvas>

						<div class="entry-legend chart-legend">
							<span class="legend published"><span class="green enlarge">{% render_item_counts user 'published' %} </span> Published</span>
							<span class="legend upcoming"><span class="blue enlarge">{% render_item_counts user 'upcoming' %} </span>Upcoming</span>
							<span class="legend ideas"><span class="orange enlarge">{% render_item_counts user 'ideas' %} </span> Ideas</span>
						</div>
					</div>
			</section>

			<section class="panel panel-default replica-stats">
				<div class="panel-body">
					<ul class="list-unstyled replica-panel-list">
						<li>
							<a href="{% url 'Replica:Topics' %}">
							<span class="purple enlarge">{% render_item_counts user 'topic' %} </span> Topics</a>
						</li>
						<li>
							<a href="{% url 'Replica:EntryTypes' %}">
							<span class="red enlarge">{% render_item_counts user 'entry_type' %} </span> Entry Types</a>
						</li>
					</ul>
				</div>
			</section>
			</div><!-- col-md-6 -->

			<div class="col-md-6">

			<section class="panel panel-default">
				<div class="panel-heading">
					<div class="pull-right"><a class="green" href="{% url 'Replica:NewTopic' %}"><span class="glyphicon glyphicon-plus-sign"></span></a></div>
					<h4 class="panel-title"><span class="glyphicon glyphicon-list"></span> Topics</h4>
				</div>
				<div class="panel-body">
				{% render_topics 10 user %}
				</div>
			</section>

			<section class="panel panel-default replica-media">
				<div class="panel-heading">
					<div class="pull-right"><a class="green" href="{% url 'Replica:NewMedia' %}"><span class="glyphicon glyphicon-plus-sign"></span></a></div>
					<h4 class="panel-title"><span class="glyphicon glyphicon-picture"></span> Media</h4>
				</div>
				<div class="panel-body">
					{% render_media user 3 %}
				</div>
			</section>

			</div><!-- scol-md-6 -->

		</div><!-- row -->

	</div><!-- col-md-7 -->

	<div class="col-md-5">

		<section class="panel panel-default entries">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-check"></span> Scheduled Entries</h4>
			</div>
			<div class="panel-body">
			{% render_upcoming 10 user %}
			</div>
		</section>

		<section id="ideas" class="panel panel-default entries">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-edit"></span> Ideas</h4>
			</div>
			<div class="panel-body">
			{% render_ideas 10 user %}
			</div>
		</section>

		<section class="panel panel-default entries">
			<div class="panel-heading">
				<h4 class="panel-title"><span class="glyphicon glyphicon-share"></span> Recently Published</h4>
			</div>
			<div class="panel-body">
			{% render_published 3 user %}
			</div>
		</section>

	</div>

</div><!-- row -->
{% endblock %}

{% block javascript %}
<script src="{{STATIC_URL}}replica/js/lib/jquery.autosize.min.js" type="text/javascript"></script>
<script>$(document).ready(function(){$('textarea').autosize();});</script>
<script src="{{STATIC_URL}}replica/js/lib/chart.min.js"></script>

<script>
var doughnutDataEntry = [
	//Published Entries
	{
		value: {% render_item_counts user 'published' %},
		color:"#8ca82f"
	},
	//Upcoming
	{
		value : {% render_item_counts user 'upcoming' %},
		color:"#12b0c5"
	},
	//ideas
	{
		value : {% render_item_counts user 'ideas' %},
		color:"#f2a925"
	}

];

var DoughnutEntry = new Chart(document.getElementById("EntryDoughnut").getContext("2d")).Doughnut(doughnutDataEntry, {
		segmentStrokeColor : "#f5f5f5",
	});
</script>

{% endblock %}
